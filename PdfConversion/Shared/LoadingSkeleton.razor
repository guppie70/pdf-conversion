@namespace PdfConversion.Shared

@if (IsLoading)
{
    <div class="skeleton-container">
        @if (Type == SkeletonType.CodeEditor)
        {
            <div class="skeleton-code">
                @for (int i = 0; i < Lines; i++)
                {
                    <div class="skeleton-line" style="width: @GetRandomWidth()%;"></div>
                }
            </div>
        }
        else if (Type == SkeletonType.Preview)
        {
            <div class="skeleton-preview">
                <div class="skeleton-title"></div>
                <div class="skeleton-paragraph"></div>
                <div class="skeleton-paragraph short"></div>
                <div class="skeleton-title"></div>
                <div class="skeleton-paragraph"></div>
            </div>
        }
        else if (Type == SkeletonType.Panel)
        {
            <div class="skeleton-panel">
                <div class="skeleton-header"></div>
                <div class="skeleton-content">
                    @for (int i = 0; i < 8; i++)
                    {
                        <div class="skeleton-line" style="width: @GetRandomWidth()%;"></div>
                    }
                </div>
            </div>
        }
    </div>
}
else
{
    @ChildContent
}

@code {
    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public SkeletonType Type { get; set; } = SkeletonType.Panel;

    [Parameter]
    public int Lines { get; set; } = 20;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    private Random _random = new Random();

    private int GetRandomWidth()
    {
        return _random.Next(60, 100);
    }

    public enum SkeletonType
    {
        CodeEditor,
        Preview,
        Panel
    }
}
