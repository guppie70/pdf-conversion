/* Responsive Design Improvements */

/* Mobile-first breakpoints */
/* xs: < 576px */
/* sm: >= 576px */
/* md: >= 768px */
/* lg: >= 992px */
/* xl: >= 1200px */

/* Tablet and below (< 992px) */
@media (max-width: 991px) {
    /* Stack panels vertically on tablets */
    .panels-container {
        flex-direction: column;
    }

    .panel {
        min-width: auto;
        min-height: 250px;
        flex: 1;
    }

    /* Change resize handles to horizontal */
    .resize-handle {
        width: 100%;
        height: 5px;
        cursor: row-resize;
    }

    .resize-handle::before {
        width: 40px;
        height: 3px;
    }

    /* Adjust toolbar for tablet */
    .nav-toolbar {
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    /* Settings panel full width on tablet */
    .settings-panel {
        min-width: 280px;
        max-width: 100%;
        margin: 0.5rem;
    }

    /* Preview controls stack */
    .preview-controls {
        flex-wrap: wrap;
    }
}

/* Mobile phones (< 768px) */
@media (max-width: 767px) {
    /* Top navigation adjustments */
    .top-nav {
        padding: 0 1rem;
        height: auto;
        min-height: 60px;
        flex-direction: column;
        align-items: stretch;
    }

    .nav-links {
        width: 100%;
        justify-content: space-around;
        padding: 0.5rem 0;
    }

    .nav-link {
        padding: 0 0.75rem;
        font-size: 0.85rem;
    }

    /* Toolbar stacks on mobile */
    .nav-toolbar {
        width: 100%;
        padding: 0.5rem 0;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .nav-toolbar-actions {
        gap: 0.25rem;
    }

    .nav-toolbar-actions .btn {
        padding: 0.375rem;
    }

    .nav-toolbar-actions .btn i {
        font-size: 0.875rem;
    }

    /* Workspace adjustments */
    .development-workspace {
        height: calc(100vh - 120px); /* Account for taller header */
    }

    /* Panel headers condensed */
    .panel-header {
        padding: 0.625rem 1rem;
        flex-wrap: wrap;
    }

    .panel-header .fw-bold {
        font-size: 0.8rem;
    }

    .panel-header .text-muted {
        font-size: 0.7rem;
    }

    /* Preview controls compact */
    .preview-controls {
        width: 100%;
        justify-content: flex-end;
    }

    .preview-actions {
        gap: 0.25rem;
    }

    .zoom-indicator {
        font-size: 0.7rem;
        min-width: 30px;
    }

    /* Code editors smaller text */
    .code-editor {
        font-size: 0.75rem;
        padding: 1rem;
    }

    /* Preview rendered smaller padding */
    .preview-rendered {
        padding: 1rem;
        font-size: 0.875rem;
    }

    /* Stats badges stack */
    .preview-stats {
        padding: 0.5rem 1rem;
    }

    .stats-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.375rem;
    }

    .stats-content .badge {
        font-size: 0.65rem;
        padding: 0.25rem 0.5rem;
    }

    /* Settings panel mobile */
    .settings-panel {
        min-width: auto;
        width: calc(100vw - 1rem);
        max-width: none;
        margin: 0.5rem;
    }

    /* Alerts condensed */
    .alert {
        margin: 1rem;
        font-size: 0.8rem;
        padding: 0.75rem;
    }

    /* Help panel mobile */
    .help-panel {
        width: 95vw;
        max-height: 85vh;
    }

    .help-header {
        padding: 1rem;
    }

    .help-header h5 {
        font-size: 1rem;
    }

    .help-body {
        flex-direction: column;
    }

    .help-nav {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        padding: 0.5rem;
        border-right: none;
        border-bottom: 1px solid #dee2e6;
    }

    .help-nav-item {
        white-space: nowrap;
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
    }

    .help-content {
        padding: 1rem;
    }

    /* Toast notifications smaller */
    .toast {
        min-width: 250px;
        max-width: calc(100vw - 2rem);
    }

    .toast-header,
    .toast-body {
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
    }
}

/* Very small phones (< 576px) */
@media (max-width: 575px) {
    /* Further reduce spacing */
    .top-nav {
        padding: 0 0.5rem;
    }

    .nav-link {
        padding: 0 0.5rem;
        font-size: 0.8rem;
    }

    .panel-header {
        padding: 0.5rem 0.75rem;
    }

    .code-editor {
        font-size: 0.7rem;
        padding: 0.75rem;
    }

    .preview-rendered {
        padding: 0.75rem;
    }

    /* Hide less critical info on very small screens */
    .panel-header .text-muted {
        display: none;
    }

    .zoom-indicator {
        display: none;
    }
}

/* Collapsible sidebars for small screens */
@media (max-width: 991px) {
    .panel-left,
    .panel-right {
        position: relative;
    }

    .panel-left.collapsed,
    .panel-right.collapsed {
        min-height: 60px;
        max-height: 60px;
        overflow: hidden;
    }

    .panel-left.collapsed .panel-content,
    .panel-right.collapsed .panel-content {
        display: none;
    }

    .panel-header {
        cursor: pointer;
        user-select: none;
    }

    .panel-header::after {
        content: '\F282'; /* Bootstrap icon chevron-down */
        font-family: 'bootstrap-icons';
        margin-left: auto;
        transition: transform 0.3s ease;
    }

    .panel.collapsed .panel-header::after {
        transform: rotate(-180deg);
    }
}

/* Landscape orientation adjustments */
@media (max-width: 991px) and (orientation: landscape) {
    .development-workspace {
        height: calc(100vh - 60px);
    }

    .panels-container {
        flex-direction: row;
    }

    .panel {
        min-width: 200px;
        min-height: auto;
    }

    .resize-handle {
        width: 5px;
        height: 100%;
        cursor: col-resize;
    }

    .resize-handle::before {
        width: 3px;
        height: 40px;
    }
}

/* Print styles */
@media print {
    .top-nav,
    .panel-header,
    .preview-controls,
    .preview-stats,
    .settings-panel,
    .alert,
    .toast-container,
    .help-panel {
        display: none !important;
    }

    .panel-left,
    .panel-center {
        display: none !important;
    }

    .development-workspace {
        height: auto;
    }

    .panels-container {
        display: block;
    }

    .panel-right {
        border: none;
    }

    .preview-rendered {
        padding: 0;
    }
}

/* Touch-friendly larger tap targets */
@media (hover: none) and (pointer: coarse) {
    .btn {
        min-height: 44px;
        min-width: 44px;
    }

    .form-select,
    .form-control {
        min-height: 44px;
    }

    .resize-handle {
        width: 10px;
    }

    .resize-handle:hover {
        background: #0d6efd;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .panel {
        border: 2px solid currentColor;
    }

    .btn {
        border-width: 2px;
    }

    .form-select,
    .form-control {
        border-width: 2px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .skeleton-line,
    .skeleton-title,
    .skeleton-paragraph,
    .skeleton-header {
        animation: none;
    }
}
